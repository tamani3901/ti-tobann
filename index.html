<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£²é£Ÿåº—çµŒå–¶ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ - ãƒãƒ¼ãƒˆã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³</title>
    <style>
        /* --- CSS: ã‚¹ã‚¿ã‚¤ãƒ«å®šç¾© (å‰å›ã¨ã»ã¼åŒã˜) --- */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 10vh; 
        }

        #game-container {
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 900px;
            padding: 30px;
            border: 5px solid #ff5722; /* ãƒãƒ¼ãƒˆæ„Ÿå‡ºã™ */
        }

        h1, h2 {
            color: #ff5722; /* ãƒãƒ¼ãƒˆè‰² */
            text-align: center;
            border-bottom: 2px solid #ff5722;
            padding-bottom: 10px;
            margin-top: 0;
        }
        
        /* ... (ãã®ä»–ã®CSSã¯çœç•¥ã€å‰å›ã®ã‚³ãƒ¼ãƒ‰ã¨åŒã˜) ... */
        .screen {
            display: none; 
        }

        .screen.active {
            display: block; 
        }

        .option-group {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .button-list button, .action-btn {
            background-color: #9c27b0; /* ãƒãƒ¼ãƒˆãƒœã‚¿ãƒ³è‰² */
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            display: inline-block;
        }

        .button-list button:hover, .action-btn:hover {
            background-color: #7b1fa2;
        }
        
        #game-ui {
            display: grid;
            grid-template-areas: 
                "header header"
                "main sidebar";
            grid-template-columns: 3fr 1fr; 
            gap: 15px;
        }

        #header-bar {
            grid-area: header;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        #main-game-area {
            grid-area: main;
            min-height: 400px;
            background-color: #ffe0b2; /* ãƒãƒ¼ãƒˆèƒŒæ™¯ */
            border-radius: 8px;
            padding: 20px;
        }
        
        #sidebar-info {
            grid-area: sidebar;
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #ccc;
        }
        
        #status-display {
            font-size: 1.2em;
            font-weight: bold;
            color: #ff5722; /* ãƒãƒ¼ãƒˆè‰² */
        }
        
        #log-terop {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(255, 87, 34, 0.9);
            color: white;
            padding: 10px 20px;
            border-radius: 5px 5px 0 0;
            font-size: 0.9em;
            opacity: 0;
            transition: opacity 0.5s;
            z-index: 1000;
        }
        
        .seat-empty { background-color: #fff3e0; border: 1px solid #ff5722; }
        .seat-occupied-wait { background-color: #ffe0b2; border: 1px solid #ff9800; color: #333; }
        .seat-occupied-eat { background-color: #ffcdd2; border: 1px solid #f44336; color: #333; }
        
        /* --- ãƒ¢ãƒ¼ãƒ€ãƒ«CSS (å‰å›ã¨åŒã˜) --- */
        .modal {
            display: none; 
            position: fixed;
            z-index: 1001; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4); 
            padding-top: 50px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto; 
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
        }
        .employee-item, .menu-item-row, .item-list-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dotted #eee;
        }
        .menu-item-row input[type="number"] {
            width: 80px;
            text-align: right;
            margin-left: 10px;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="home-screen" class="screen active">
        <h1>ğŸ® ãƒãƒ¼ãƒˆã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ ğŸ®</h1>
        <p style="text-align: center; font-size: 1.1em; color: #ff5722; font-weight: bold;">
            å¸­æ•°æœ€å¤§20ã€è³‡é‡‘ç„¡é™ã€å…¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼é–‹æ”¾ã€ãƒã‚¹ã‚¿ãƒ¼å¾“æ¥­å“¡åˆ©ç”¨å¯èƒ½
        </p>
        <div class="button-list" style="text-align: center; margin-top: 30px;">
            <button onclick="showScreen('start-screen')">ãƒãƒ¼ãƒˆã‚²ãƒ¼ãƒ è¨­å®šã‚’é–‹å§‹</button>
            <button onclick="alert('ã“ã®ã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã§ã¯ã‚»ãƒ¼ãƒ–/ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã¯æä¾›ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚')">ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ (ç„¡åŠ¹)</button>
        </div>
    </div>

    <div id="start-screen" class="screen">
        <h2>ãƒãƒ¼ãƒˆè¨­å®šï¼ˆåˆæœŸè¨­å®šï¼‰</h2>
        
        <div id="step-type" class="option-group">
            <h3>1. åº—ã®ç¨®é¡ã‚’é¸ã‚“ã§ãã ã•ã„</h3>
            <div class="button-list">
                <button data-type="FastFood" onclick="selectType('FastFood')">ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰</button>
                <button data-type="Restaurant" onclick="selectType('Restaurant')">ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</button>
            </div>
            <p id="type-info"></p>
        </div>

        <div id="step-location" class="option-group" style="display: none;">
            <h3>2. å ´æ‰€ã‚’é¸ã‚“ã§ãã ã•ã„</h3>
            <div class="button-list">
                <button data-loc="ã©ã“ã§ã‚‚ãƒ‰ã‚¢" data-max="20" onclick="selectLocation('ã©ã“ã§ã‚‚ãƒ‰ã‚¢', 20)">ã©ã“ã§ã‚‚ãƒ‰ã‚¢ (å¸­æ•°20å›ºå®š)</button>
            </div>
            <p id="location-info">â€»å¸­æ•°ã¯æœ€å¤§20å¸­ã«å›ºå®šã•ã‚Œã¾ã™ã€‚</p>
        </div>

        <div id="step-menu" class="option-group" style="display: none;">
            <h3>3. åˆæœŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„ (åˆ¶é™ãªã—)</h3>
            <p style="color: green;">å…¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰é¸æŠå¯èƒ½ã§ã™ã€‚</p>
            <div id="menu-selection-area" class="button-list" style="display: flex; flex-wrap: wrap;">
                </div>
        </div>

        <div id="step-start" class="option-group" style="text-align: center; margin-top: 30px; display: none;">
            <button onclick="showConfirmation()" class="action-btn" style="background-color: #ff5722;">ãƒãƒ¼ãƒˆã‚²ãƒ¼ãƒ é–‹å§‹</button>
            <button onclick="resetSetup()" class="action-btn">è¨­å®šã‚’ãƒªã‚»ãƒƒãƒˆ</button>
        </div>
    </div>

    <div id="confirmation-screen" class="screen">
        <h2>ãƒãƒ¼ãƒˆè¨­å®šç¢ºèª</h2>
        <p style="color: red; font-weight: bold;">ã“ã®ã‚²ãƒ¼ãƒ ã¯ç„¡é™è³‡é‡‘ã§ã™ã€‚</p>
        <div id="config-summary"></div>
        <div class="button-list" style="text-align: center;">
            <button onclick="startGame()" class="action-btn" style="background-color: #ff5722;">OK (ãƒãƒ¼ãƒˆã‚¹ã‚¿ãƒ¼ãƒˆï¼)</button>
            <button onclick="showScreen('start-screen')" class="action-btn">æˆ»ã‚‹</button>
        </div>
    </div>

    <div id="game-screen" class="screen">
        <div id="game-ui">
            <div id="header-bar">
                <div>
                    <button onclick="showMenu()" class="action-btn">ãƒ¡ãƒ‹ãƒ¥ãƒ¼</button>
                    <button onclick="showSettings()" class="action-btn">å¾“æ¥­å“¡/è¨­å®š</button>
                    <button onclick="showItems()" class="action-btn">ã‚¢ã‚¤ãƒ†ãƒ </button>
                    <button onclick="alert('ãƒãƒ¼ãƒˆã‚¨ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã§ã¯ã‚»ãƒ¼ãƒ–ã§ãã¾ã›ã‚“ã€‚')" class="action-btn" style="background-color: #ccc;" disabled>ã‚»ãƒ¼ãƒ– (ç„¡åŠ¹)</button>
                    <button onclick="quitGame()" class="action-btn" style="background-color: #f44336;">ã‚„ã‚ã‚‹</button>
                </div>
                <div id="day-time-display">
                    <span id="day-display">Day 1</span> | <span id="time-display">00:00</span>
                </div>
                <div id="status-display">
                    <span id="asset-display">è³‡ç”£: â™¾ï¸ ç„¡é™</span> | <span id="reputation-display">è©•åˆ¤: â˜…3</span>
                </div>
            </div>
            <div id="main-game-area">
                <h3>åº—èˆ—ã‚¨ãƒªã‚¢ (<span id="store-type-display"></span> / <span id="store-location-display"></span>)</h3>
                <div id="seat-map">
                    </div>
            </div>
            <div id="sidebar-info">
                <h3>æƒ…å ±</h3>
                <p>é«˜ç´šã‚´ãƒŸç®±: <span id="garbage-can-status">æœªè³¼å…¥</span></p>
                <h4>å¾“æ¥­å“¡ï¼ˆ<span id="employee-count">0</span>åï¼‰</h4>
                <div id="employee-status">
                    </div>
                <hr>
                <h4>å¾…æ©Ÿä¸­ã®ã‚¿ã‚¹ã‚¯</h4>
                <p>æ³¨æ–‡å¾…ã¡: <span id="wait-order-count">0</span></p>
                <p>èª¿ç†å¾…ã¡: <span id="wait-cook-count">0</span></p>
                <hr>
                <h4>å®¢ã®è©³ç´°</h4>
                <div id="waiting-customer-details">
                    </div>
            </div>
        </div>
    </div>
</div>

<div id="log-terop"></div>

<div id="settings-modal" class="modal">
    <div class="modal-content">
        <h2>åº—èˆ—è¨­å®š / å¾“æ¥­å“¡ç®¡ç†</h2>
        
        <div class="option-group">
            <h3>å¾“æ¥­å“¡ç®¡ç† (ç¾åœ¨ã®äººæ•°: <span id="current-employee-count">0</span>äºº)</h3>
            <div id="employee-list-settings">
                </div>
            <p><strong>æ¡ç”¨:</strong> (æ—¥å½“)</p>
            <div class="button-list">
                <button onclick="addEmployee('ãƒã‚¹ã‚¿ãƒ¼')" style="background-color: #f39c12;">ãƒã‚¹ã‚¿ãƒ¼ (80ä¸‡)</button> 
                <button onclick="addEmployee('ãƒ™ãƒ†ãƒ©ãƒ³')">ãƒ™ãƒ†ãƒ©ãƒ³ (50ä¸‡)</button>
                <button onclick="addEmployee('æ¨™æº–')">æ¨™æº– (25ä¸‡)</button>
                <button onclick="addEmployee('ãƒãƒ³ã‚³ãƒ„')">ãƒãƒ³ã‚³ãƒ„ (10ä¸‡)</button>
            </div>
        </div>

        <button onclick="closeModal('settings-modal')" class="action-btn">è¨­å®šã‚’é–‰ã˜ã‚‹</button>
    </div>
</div>

<div id="menu-modal" class="modal">
    <div class="modal-content">
        <h2>ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç†ã¨ä¾¡æ ¼èª¿æ•´</h2>
        <p>â€»ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ä¾¡æ ¼ã¯ã“ã“ã§èª¿æ•´ã§ãã¾ã™ã€‚</p>
        
        <div class="option-group">
            <h3>ç¾åœ¨ã®æä¾›ãƒ¡ãƒ‹ãƒ¥ãƒ¼ (<span id="menu-count">0</span>å€‹)</h3>
            <div id="current-menu-list">
                </div>
        </div>

        <div class="option-group">
            <h3>æ–°è¦ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¿½åŠ </h3>
            <p>
                <button onclick="showAllMenuOptions()">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ä¸€è¦§ã‚’è¡¨ç¤º</button>
            </p>
            <div id="all-menu-options" style="display: none; border: 1px dashed #ccc; padding: 10px;">
                </div>
        </div>

        <button onclick="closeModal('menu-modal')" class="action-btn">ç®¡ç†ã‚’çµ‚äº†</button>
    </div>
</div>

<div id="item-modal" class="modal">
    <div class="modal-content">
        <h2>ã‚¢ã‚¤ãƒ†ãƒ è³¼å…¥ (è³‡ç”£ç„¡é™ã®ãŸã‚å®Ÿè³ªç„¡æ–™)</h2>
        <p>è³¼å…¥ã—ãŸã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’é¸ã‚“ã§ãã ã•ã„ã€‚</p>
        
        <div id="item-list-purchase" class="option-group">
            </div>

        <button onclick="closeModal('item-modal')" class="action-btn">é–‰ã˜ã‚‹</button>
    </div>
</div>


<script>
    // --- ã‚²ãƒ¼ãƒ ã®é™çš„ãƒ‡ãƒ¼ã‚¿ ---

    const MENU_DATA = { 
        FastFood: [
            { name: "ãƒãƒ¼ã‚ºãƒãƒ¼ã‚¬ãƒ¼", basePrice: 500, cost: 200, category: "Burger" },
            { name: "ãƒ†ãƒªãƒ¤ã‚­ãƒãƒ¼ã‚¬ãƒ¼", basePrice: 500, cost: 220, category: "Burger" },
            { name: "ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼", basePrice: 500, cost: 180, category: "Burger" },
            { name: "ç„¼è‚‰ãƒ©ã‚¤ã‚¹ãƒãƒ¼ã‚¬ãƒ¼", basePrice: 500, cost: 250, category: "Burger" },
            { name: "ãƒãƒ†ãƒˆS", basePrice: 200, cost: 50, category: "Side" },
            { name: "ãƒãƒ†ãƒˆM", basePrice: 300, cost: 70, category: "Side" },
            { name: "ãƒãƒ†ãƒˆL", basePrice: 450, cost: 90, category: "Side" },
            { name: "ãƒŠã‚²ãƒƒãƒˆ", basePrice: 300, cost: 100, category: "Side" },
            { name: "ãƒãƒ‹ãƒ©ã‚·ã‚§ã‚¤ã‚¯", basePrice: 300, cost: 80, category: "Shake" },
            { name: "ã„ã¡ã”ã‚·ã‚§ã‚¤ã‚¯", basePrice: 300, cost: 90, category: "Shake" },
            { name: "ã‚ªãƒ¬ãƒ³ã‚¸ã‚¸ãƒ¥ãƒ¼ã‚¹", basePrice: 300, cost: 50, category: "Drink" },
            { name: "ã‚³ãƒ¼ãƒ©", basePrice: 300, cost: 60, category: "Drink" },
        ],
        Restaurant: [
            { name: "ãƒãƒ«ã‚²ãƒªãƒ¼ã‚¿", basePrice: 1200, cost: 350, category: "Pizza" },
            { name: "ãƒãƒ¼ã‚ºãƒ”ã‚¶", basePrice: 1200, cost: 300, category: "Pizza" },
            { name: "ãƒŠãƒãƒªã‚¿ãƒ³ãƒ‘ã‚¹ã‚¿", basePrice: 1000, cost: 280, category: "Pasta" },
            { name: "ãƒˆãƒãƒˆãƒ‘ã‚¹ã‚¿", basePrice: 1000, cost: 300, category: "Pasta" },
            { name: "ã‚«ãƒ«ãƒœãƒŠãƒ¼ãƒ©", basePrice: 1000, cost: 320, category: "Pasta" },
            { name: "ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­", basePrice: 900, cost: 250, category: "Dessert" },
            { name: "ãƒãƒ³ãƒãƒ¼ã‚°", basePrice: 1300, cost: 400, category: "Main" },
            { name: "ã‚¹ãƒ†ãƒ¼ã‚­", basePrice: 1400, cost: 500, category: "Main" },
            { name: "ã‚µãƒ©ãƒ€", basePrice: 500, cost: 150, category: "Side" },
            { name: "ãƒ‘ãƒ•ã‚§", basePrice: 700, cost: 200, category: "Dessert" },
            { name: "ãƒ—ãƒªãƒ³", basePrice: 400, cost: 120, category: "Dessert" },
            { name: "ã”é£¯", basePrice: 350, cost: 80, category: "Side" },
            { name: "ã‚ªãƒ¬ãƒ³ã‚¸ã‚¸ãƒ¥ãƒ¼ã‚¹", basePrice: 300, cost: 50, category: "Drink" },
            { name: "ã‚³ãƒ¼ãƒ©", basePrice: 300, cost: 60, category: "Drink" },
        ]
    };

    const ITEM_DATA = {
        GARBAGE_CAN: { name: "é«˜ç´šã‚´ãƒŸç®±", cost: 10000, effect: "å®¢ã®æº€è¶³åº¦æ¸›å°‘é€Ÿåº¦ãŒå°‘ã—ç·©å’Œï¼ˆåŠ¹æœæŒç¶šï¼‰" },
        CLEANING: { name: "æ¸…æƒã‚µãƒ¼ãƒ“ã‚¹", cost: 50000, effect: "åº—ã®è©•åˆ¤ã‚’0.2ä¸Šã’ã‚‹ï¼ˆå³æ™‚åŠ¹æœï¼‰" }
    };
    
    // =========================================================
    // 0. ã‚¯ãƒ©ã‚¹å®šç¾© (å¾“æ¥­å“¡ã‚¯ãƒ©ã‚¹ã«ãƒã‚¹ã‚¿ãƒ¼ã‚’å®šç¾©æ¸ˆã¿)
    // =========================================================

    class MenuItem {
        constructor(name, currentPrice, cost) {
            this.name = name;
            this.currentPrice = currentPrice;
            this.cost = cost;
        }
    }

    class Employee {
        constructor(grade, id = Math.random().toString(36).substring(2, 9)) {
            this.grade = grade;
            this.id = id;
            
            switch (grade) {
                // ã€ãƒãƒ¼ãƒˆè¨­å®šã€‘ãƒã‚¹ã‚¿ãƒ¼å¾“æ¥­å“¡
                case 'ãƒã‚¹ã‚¿ãƒ¼':
                    this.speedMultiplier = 3.0; // 3å€é€Ÿ
                    this.missRate = 0.0;
                    this.dailyCost = 800000; // æ—¥çµ¦80ä¸‡
                    break;
                case 'ãƒ™ãƒ†ãƒ©ãƒ³':
                    this.speedMultiplier = 1.5;
                    this.missRate = 0.0;
                    this.dailyCost = 500000; // æ—¥çµ¦50ä¸‡
                    break;
                case 'æ¨™æº–':
                    this.speedMultiplier = 1.0;
                    this.missRate = 0.03;
                    this.dailyCost = 250000; // æ—¥çµ¦25ä¸‡
                    break;
                case 'ãƒãƒ³ã‚³ãƒ„':
                    this.speedMultiplier = 0.5;
                    this.missRate = 0.10;
                    this.dailyCost = 100000;
                    break;
            }
        }
        
        getProcessTime(baseTime) {
            return baseTime / this.speedMultiplier; 
        }
    }

    class Customer {
        constructor(numPeople, orderType, seatId, menuList) {
            this.id = Math.random().toString(36).substring(2, 9);
            this.numPeople = numPeople; 
            this.orderType = orderType; 
            this.seatId = seatId;
            this.status = 'WaitOrder'; 
            this.patience = 60;        
            this.mealTimeLeft = 30;    

            if (menuList && menuList.length > 0) {
                const randomIndex = Math.floor(Math.random() * menuList.length);
                this.orderedItem = menuList[randomIndex];
                this.billAmount = this.numPeople * this.orderedItem.currentPrice;
                this.totalCost = this.numPeople * this.orderedItem.cost;
            } else {
                this.orderedItem = null;
                this.billAmount = 0;
                this.totalCost = 0;
            }
        }

        update(deltaTime) {
            if (this.status === 'Eating') {
                this.mealTimeLeft -= deltaTime;
                if (this.mealTimeLeft <= 0) {
                    this.status = 'Paying';
                }
            }
            
            // æº€è¶³åº¦ï¼ˆPatienceï¼‰ã®æ¸›ã‚Šæ–¹ã‚’èª¿æ•´ã—ã€ã‚´ãƒŸç®±åŠ¹æœã‚’é©ç”¨
            const baseRate = this.status === 'Eating' ? 0.3 : 1.0; 
            const garbageCanEffect = game.hasGarbageCan ? 0.8 : 1.0; 

            this.patience -= deltaTime * baseRate * garbageCanEffect;
            
            if (this.patience <= 0) {
                this.status = 'Done'; 
            }
        }
    }


    // =========================================================
    // 1. GameManager (ã‚²ãƒ¼ãƒ ã®é ­è„³) - è³‡ç”£ç„¡é™åŒ–ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’é©ç”¨
    // =========================================================
    class GameManager {
        constructor() {
            // ã€ãƒãƒ¼ãƒˆè¨­å®šã€‘è³‡ç”£ã¯è¡¨ç¤ºç”¨
            this.asset = 999999999999;
            this.reputation = 3;
            this.day = 1;
            this.time = 0;
            this.isPaused = false;
            this.isGameRunning = false; 

            this.storeType = null;
            this.location = null;
            this.currentSeats = 0;
            
            this.seatsData = [];
            this.customers = [];
            this.employees = []; 
            this.menu = [];

            this.cookQueue = [];
            this.employeeTasks = [];

            this.customerSpawnTimer = 0;
            this.customerSpawnInterval = 10;
            
            this.hasGarbageCan = false;
        }
        
        // ... (resetGame ã¯çœç•¥) ...

        initializeGame(settings) {
            this.isGameRunning = true;
            this.storeType = settings.type;
            this.location = settings.location;
            // ã€ãƒãƒ¼ãƒˆè¨­å®šã€‘å¸­æ•°ã¯20å¸­å›ºå®š
            this.currentSeats = 20;

            // åˆæœŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯è¨­å®šã‹ã‚‰èª­ã¿è¾¼ã¿
            this.menu = settings.initialMenu.map(itemData => new MenuItem(itemData.name, itemData.basePrice, itemData.cost));
            
            this.seatsData = [];
            for (let i = 0; i < this.currentSeats / 2; i++) {
                this.seatsData.push({ id: i + 1, isOccupied: false, numGuests: 0, customerId: null });
            }

            // ã€ãƒãƒ¼ãƒˆè¨­å®šã€‘åˆæœŸå¾“æ¥­å“¡ (ãƒã‚¹ã‚¿ãƒ¼ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ•°äººå…¥ã‚Œã¦ãŠã)
            if (this.employees.length === 0) {
                 this.employees = [new Employee('ãƒã‚¹ã‚¿ãƒ¼'), new Employee('ãƒã‚¹ã‚¿ãƒ¼'), new Employee('ãƒ™ãƒ†ãƒ©ãƒ³'), new Employee('æ¨™æº–')];
            }
            
            this.customers = [];
            this.cookQueue = [];
            this.employeeTasks = [];

            document.getElementById('store-type-display').textContent = this.storeType;
            document.getElementById('store-location-display').textContent = this.location;

            this.updateDisplay();
        }

        update(deltaTime) {
            if (this.isPaused) return;

            const GAME_SPEED = 2.0; 
            
            this.time += deltaTime * GAME_SPEED; 

            if (this.time >= 600) {
                this.time = 600;
                this.endOfDay();
                return;
            }

            this.spawnCustomer(deltaTime);

            this.customers.forEach(customer => {
                customer.update(deltaTime);
                
                if (customer.status === 'Paying') {
                    this.removeCustomer(customer, customer.seatId, true);
                } else if (customer.status === 'Done') {
                    this.removeCustomer(customer, customer.seatId, false);
                }
            });

            this.processEmployeeTasks(deltaTime); 

            this.updateDisplay();
        }

        // ... (spawnCustomer ã¯å¤‰æ›´ãªã—) ...
        
        removeCustomer(customer, seatId, paid) {
            const seat = this.seatsData.find(s => s.id === seatId);
            if (seat) {
                seat.isOccupied = false;
                seat.numGuests = 0;
                seat.customerId = null;
            }

            this.customers = this.customers.filter(c => c !== customer);
            
            if (paid) {
                const profit = customer.billAmount - customer.totalCost;
                // ã€ãƒãƒ¼ãƒˆä¿®æ­£ã€‘è³‡ç”£ã®å¢—æ¸›ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Œå…¨ã«å‰Šé™¤
                terop(`å¸­ ${seatId} ã®ä¼šè¨ˆå®Œäº†ï¼ æ³¨æ–‡: ${customer.orderedItem.name} x ${customer.numPeople}ã€åˆ©ç›Š: +${profit.toLocaleString()}å†† (è³‡ç”£ä¸å¤‰)`);
            } else {
                // ã€ãƒãƒ¼ãƒˆä¿®æ­£ã€‘è³‡ç”£ã®å¢—æ¸›ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Œå…¨ã«å‰Šé™¤
                this.reputation = Math.max(1, this.reputation - 0.1); 
                terop(`å¸­ ${seatId} ã®ãŠå®¢æ§˜ãŒæ€’ã£ã¦å¸°ã‚Šã¾ã—ãŸ...è©•åˆ¤ä½ä¸‹ (è³‡ç”£ä¸å¤‰)`);
            }
        }
        
        // ... (processEmployeeTasks, completeTask ã¯å¤‰æ›´ãªã—) ...

        updateDisplay() {
            // ã€ãƒãƒ¼ãƒˆè¨­å®šã€‘è³‡ç”£è¡¨ç¤ºã‚’ç„¡é™ã«
            document.getElementById('asset-display').textContent = `è³‡ç”£: â™¾ï¸ ç„¡é™`;
            document.getElementById('reputation-display').textContent = `è©•åˆ¤: â˜…${this.reputation.toFixed(1)}`;
            
            // ... (æ™‚é–“ã€å¸­ã®è¡¨ç¤ºã¯å¤‰æ›´ãªã—) ...

            const minutes = Math.floor(this.time / 60);
            const seconds = Math.floor(this.time % 60);
            const timeStr = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            document.getElementById('time-display').textContent = timeStr;
            document.getElementById('day-display').textContent = `Day ${this.day}`;
            
            const seatMap = document.getElementById('seat-map');
            seatMap.innerHTML = this.seatsData.map(seat => {
                let className = 'seat-empty';
                let statusText = 'ç©ºå¸­';
                
                if (seat.isOccupied) {
                    const customer = this.customers.find(c => c.id === seat.customerId);
                    if (customer) {
                        if (customer.status === 'Eating' || customer.status === 'Paying') {
                            className = 'seat-occupied-eat';
                            statusText = `é£Ÿäº‹ä¸­ (${seat.numGuests}äºº)`;
                        } else {
                            className = 'seat-occupied-wait';
                            statusText = `å¾…æ©Ÿä¸­ (${seat.numGuests}äºº)<br>æº€è¶³åº¦: ${customer.patience.toFixed(0)}`;
                        }
                    }
                }
                
                return `<div class="${className}">å¸­ ${seat.id}<br>${statusText}</div>`;
            }).join('');
            
            document.getElementById('garbage-can-status').textContent = this.hasGarbageCan ? 'âœ… è³¼å…¥æ¸ˆã¿' : 'âŒ æœªè³¼å…¥';
            
            document.getElementById('employee-count').textContent = this.employees.length;
            document.getElementById('wait-order-count').textContent = this.customers.filter(c => c.status === 'WaitOrder' && c.orderType === 'æ‰‹å‹•').length;
            document.getElementById('wait-cook-count').textContent = this.cookQueue.length;
            
            document.getElementById('employee-status').innerHTML = this.employees.map(emp => {
                const task = this.employeeTasks.find(t => t.employee === emp);
                let taskDesc = 'å¾…æ©Ÿä¸­...';
                if (task) {
                    taskDesc = task.taskType === 'order_taking' ? 
                        `æ³¨æ–‡å—ä»˜ä¸­ (${task.timeLeft.toFixed(1)}s)` : 
                        `èª¿ç†ä¸­ (${task.timeLeft.toFixed(1)}s)`;
                }
                return `
                    <p style="margin: 5px 0; border-bottom: 1px dotted #eee;">
                        **${emp.grade}** (${emp.speedMultiplier}x): ${taskDesc}
                    </p>
                `;
            }).join('');
            
            const waitingCustomers = this.customers.filter(c => c.status !== 'Eating' && c.status !== 'Paying');
            let waitingDetails = '';
            waitingCustomers.forEach(c => {
                const statusText = c.status === 'WaitOrder' ? 'æ³¨æ–‡å¾…ã¡' : (c.status === 'WaitCook' ? 'èª¿ç†å¾…ã¡' : 'æä¾›å¾…ã¡');
                const item = c.orderedItem ? c.orderedItem.name : 'ä¸æ˜';
                waitingDetails += `<p style="margin: 5px 0; font-size: 0.9em; border-bottom: 1px dotted #eee;">
                    å¸­${c.seatId} (${c.numPeople}äºº) - ${statusText} <br>
                    å“: ${item} x ${c.numPeople} (${c.billAmount.toLocaleString()}å††)
                </p>`;
            });
            document.getElementById('waiting-customer-details').innerHTML = waitingDetails || '<p>å¾…ã¡å®¢ãªã—</p>';
        }

        endOfDay() {
            this.isPaused = true;
            terop('æœ¬æ—¥ã®å–¶æ¥­ãŒçµ‚äº†ã—ã¾ã—ãŸï¼');

            if (gameLoopRef) cancelAnimationFrame(gameLoopRef);

            const totalCost = this.employees.reduce((sum, emp) => sum + emp.dailyCost, 0);
            
            // ã€ãƒãƒ¼ãƒˆä¿®æ­£ã€‘çµŒè²»ã‚‚è³‡ç”£ã‚’æ¸›ã‚‰ã•ãªã„
            terop(`Day ${this.day} ã®çµŒè²» ${totalCost.toLocaleString()}å†† ã¯ç„¡é™è³‡é‡‘ã‹ã‚‰æ”¯æ‰•ã‚ã‚Œã¾ã—ãŸã€‚`);

            setTimeout(() => {
                alert(`Day ${this.day} çµ‚äº†ã€‚\nç·çµŒè²»: ${totalCost.toLocaleString()}å††\næ¬¡æ—¥è³‡ç”£: â™¾ï¸ ç„¡é™`);
                
                this.day++;
                this.time = 0;
                this.isPaused = false; 
                this.customers = [];
                this.cookQueue = [];
                this.employeeTasks = [];
                
                this.customerSpawnTimer = 0;
                this.customerSpawnInterval = 10; 
                
                if (this.isGameRunning) gameLoop(0); 
            }, 3000);
        }

        // getGameDataã¯ãƒãƒ¼ãƒˆç‰ˆã§ã¯ä¸è¦ã®ãŸã‚å‰Šé™¤
    }


    // =========================================================
    // 2. ç”»é¢ã¨åˆæœŸè¨­å®šãƒ­ã‚¸ãƒƒã‚¯ (ãƒãƒ¼ãƒˆå°‚ç”¨ã«ç°¡ç•¥åŒ–)
    // =========================================================
    
    function showScreen(screenId) {
        document.querySelectorAll('.screen').forEach(screen => {
            screen.classList.remove('active');
        });
        document.getElementById(screenId).classList.add('active');
    }

    let currentSettings = { 
        type: null, 
        location: 'ã©ã“ã§ã‚‚ãƒ‰ã‚¢', 
        maxSeats: 20, 
        currentSeats: 20, // å¸­æ•°20ã«å›ºå®š
        initialCost: 0, // è²»ç”¨ã¯ç„¡è¦–
        initialMenu: [] 
    };

    function selectType(type) {
        currentSettings.type = type;
        document.getElementById('type-info').textContent = `é¸æŠä¸­ã®ç¨®é¡: ${type}`;
        document.getElementById('step-location').style.display = 'block';
    }

    function selectLocation(location, maxSeats) {
        currentSettings.location = location;
        currentSettings.maxSeats = 20; 
        currentSettings.currentSeats = 20; 
        
        document.getElementById('location-info').textContent = `é¸æŠä¸­ã®å ´æ‰€: ${location} (å¸­æ•° ${currentSettings.maxSeats} å¸­)`;
        
        setupMenuSelection(); 
        document.getElementById('step-menu').style.display = 'block';
        document.getElementById('step-start').style.display = 'block';
    }
    
    function setupMenuSelection() {
        // ã€ãƒãƒ¼ãƒˆè¨­å®šã€‘å…¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—
        const menuArea = document.getElementById('menu-selection-area');
        menuArea.innerHTML = '';
        currentSettings.initialMenu = [];

        // Restaurantã¨FastFoodã®å…¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’çµåˆ
        const menuItems = [...MENU_DATA.FastFood, ...MENU_DATA.Restaurant];

        menuItems.forEach(item => {
            const button = document.createElement('button');
            button.textContent = `${item.name} (${item.basePrice.toLocaleString()}å††)`;
            button.dataset.name = item.name;
            button.onclick = () => toggleMenuSelection(item);
            menuArea.appendChild(button);
        });
    }

    function toggleMenuSelection(item) {
        const name = item.name;
        const index = currentSettings.initialMenu.findIndex(m => m.name === name);
        const button = document.querySelector(`button[data-name="${name}"]`);

        if (index === -1) {
            currentSettings.initialMenu.push(item);
            button.style.backgroundColor = '#4CAF50';
        } else {
            currentSettings.initialMenu.splice(index, 1);
            button.style.backgroundColor = '#9c27b0';
        }
    }

    function showConfirmation() {
        if (currentSettings.initialMenu.length === 0) {
            alert('åˆæœŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æœ€ä½1ã¤é¸æŠã—ã¦ãã ã•ã„ï¼');
            return;
        }

        const summary = `
            <p><strong>åº—ã‚¿ã‚¤ãƒ—:</strong> ${currentSettings.type}</p>
            <p><strong>å ´æ‰€:</strong> ${currentSettings.location}</p>
            <p><strong>å¸­æ•°:</strong> ${currentSettings.currentSeats} å¸­ (æœ€å¤§)</p>
            <p style="color: red; font-weight: bold;"><strong>è³‡ç”£æ®‹é«˜:</strong> â™¾ï¸ ç„¡é™</p>
        `;
        document.getElementById('config-summary').innerHTML = summary;
        showScreen('confirmation-screen');
    }

    function resetSetup() {
        showScreen('home-screen');
        currentSettings = { 
            type: null, 
            location: 'ã©ã“ã§ã‚‚ãƒ‰ã‚¢', 
            maxSeats: 20, 
            currentSeats: 20, 
            initialCost: 0, 
            initialMenu: [] 
        };
    }

    // =========================================================
    // 3. ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—ã¨æ“ä½œ
    // =========================================================

    function gameLoop(currentTime) {
        const deltaTime = (currentTime - gameLoop.lastTime) / 1000;
        gameLoop.lastTime = currentTime;
        game.update(deltaTime);
        if (game.isGameRunning && !game.isPaused) {
            gameLoopRef = requestAnimationFrame(gameLoop);
        }
    }
    gameLoop.lastTime = 0;

    function startGame() {
        if (currentSettings.initialMenu.length === 0) {
            alert('åˆæœŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æœ€ä½1ã¤é¸æŠã—ã¦ãã ã•ã„ï¼');
            return;
        }
        
        game.initializeGame(currentSettings);
        
        showScreen('game-screen');
        terop(`ãƒãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰é–‹å§‹ï¼${currentSettings.type}ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ã¾ã—ãŸï¼`);
        
        if (gameLoopRef) cancelAnimationFrame(gameLoopRef);
        gameLoop(0);
        
        terop('ãƒãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹: å¸­æ•°20ã€è³‡é‡‘ç„¡é™ã€å…¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ãƒã‚¹ã‚¿ãƒ¼å¾“æ¥­å“¡ã€‚');
    }
    
    // ã‚²ãƒ¼ãƒ ã‚’ã‚„ã‚ã‚‹ãƒœã‚¿ãƒ³ã®å‡¦ç†
    function quitGame() {
        if (confirm('ã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¦ãƒ›ãƒ¼ãƒ ç”»é¢ã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿ')) {
            game.isGameRunning = false;
            if (gameLoopRef) cancelAnimationFrame(gameLoopRef);
            showScreen('home-screen');
        }
    }
    
    // --- ãƒ¢ãƒ¼ãƒ€ãƒ«æ“ä½œ ---
    function openModal(modalId) {
        document.getElementById(modalId).style.display = 'block';
        game.isPaused = true; 
        if (modalId === 'settings-modal') {
            updateEmployeeSettings();
        } else if (modalId === 'menu-modal') {
            updateMenuSettings();
        } else if (modalId === 'item-modal') {
            updateItemPurchaseUI();
        }
    }

    function closeModal(modalId) {
        document.getElementById(modalId).style.display = 'none';
        game.isPaused = false;
        if (game.isGameRunning) gameLoop(0); 
    }

    function showMenu() {
        openModal('menu-modal');
    }
    function showSettings() {
        openModal('settings-modal');
    }
    function showItems() {
        updateItemPurchaseUI();
        openModal('item-modal');
    }

    // --- å¾“æ¥­å“¡ç®¡ç† ---
    function updateEmployeeSettings() {
        const listElement = document.getElementById('employee-list-settings');
        listElement.innerHTML = '';
        document.getElementById('current-employee-count').textContent = game.employees.length;

        game.employees.forEach(emp => {
            const item = document.createElement('div');
            item.className = 'employee-item';
            item.innerHTML = `
                <span>**${emp.grade}** (æ—¥å½“: ${emp.dailyCost.toLocaleString()}å††, é€Ÿåº¦: ${emp.speedMultiplier}x)</span>
                <button onclick="removeEmployee('${emp.id}')" style="background-color: #f44336; padding: 5px 10px;">è§£é›‡</button>
            `;
            listElement.appendChild(item);
        });
    }

    function addEmployee(grade) {
        game.employees.push(new Employee(grade));
        updateEmployeeSettings();
        terop(`${grade}å¾“æ¥­å“¡ã‚’é›‡ç”¨ã—ã¾ã—ãŸï¼`);
    }

    function removeEmployee(id) {
        const index = game.employees.findIndex(emp => emp.id === id);
        if (index !== -1) {
            game.employees.splice(index, 1);
            updateEmployeeSettings();
            terop('å¾“æ¥­å“¡ã‚’è§£é›‡ã—ã¾ã—ãŸã€‚');
        }
    }

    // --- ã‚¢ã‚¤ãƒ†ãƒ ç®¡ç† (è³‡ç”£ç„¡é™ã®ãŸã‚ã‚³ã‚¹ãƒˆãƒ­ã‚¸ãƒƒã‚¯ã‚’ç„¡è¦–) ---
    function updateItemPurchaseUI() {
        const listElement = document.getElementById('item-list-purchase');
        listElement.innerHTML = '';

        Object.keys(ITEM_DATA).forEach(key => {
            const item = ITEM_DATA[key];
            const isOwned = (key === 'GARBAGE_CAN' && game.hasGarbageCan);
            
            const itemRow = document.createElement('div');
            itemRow.className = 'item-list-row';
            
            let buttonHTML;
            if (isOwned) {
                buttonHTML = `<span style="color: green; font-weight: bold;">è³¼å…¥æ¸ˆã¿</span>`;
            } else {
                buttonHTML = `<button onclick="purchaseItem('${key}', ${item.cost})" 
                              style="background-color: #4CAF50;">
                              è³¼å…¥ (ã‚³ã‚¹ãƒˆ ${item.cost.toLocaleString()}å††)
                              </button>`;
            }

            itemRow.innerHTML = `
                <span>
                    **${item.name}**<br>
                    <span style="font-size: 0.8em; color: #666;">${item.effect}</span>
                </span>
                <div>${buttonHTML}</div>
            `;
            listElement.appendChild(itemRow);
        });
    }

    function purchaseItem(key, cost) {
        // ã€ãƒãƒ¼ãƒˆä¿®æ­£ã€‘è³‡ç”£ãƒã‚§ãƒƒã‚¯ã¯å¸¸ã«OKã€è³‡ç”£ã¯æ¸›ã‚‰ã•ãªã„
        
        if (key === 'GARBAGE_CAN' && game.hasGarbageCan) {
             terop('ã™ã§ã«é«˜ç´šã‚´ãƒŸç®±ã¯è³¼å…¥æ¸ˆã¿ã§ã™ã€‚');
             return;
        }

        if (key === 'GARBAGE_CAN') {
            game.hasGarbageCan = true;
            terop(`é«˜ç´šã‚´ãƒŸç®±ã‚’è³¼å…¥ï¼å®¢ã®æº€è¶³åº¦ãŒæ¸›ã‚Šã«ãããªã‚Šã¾ã—ãŸã€‚(è²»ç”¨ ${cost.toLocaleString()}å††ã¯ç„¡é™è³‡é‡‘ã‹ã‚‰)`);
        } else if (key === 'CLEANING') {
            game.reputation = Math.min(5, game.reputation + 0.2);
            terop(`æ¸…æƒã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿæ–½ï¼è©•åˆ¤ãŒ0.2ã‚¢ãƒƒãƒ—ã—ã¾ã—ãŸï¼(è²»ç”¨ ${cost.toLocaleString()}å††ã¯ç„¡é™è³‡é‡‘ã‹ã‚‰)`);
        }
        
        game.updateDisplay();
        updateItemPurchaseUI();
    }

    // --- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç®¡ç† (å‰å›ã¨åŒã˜) ---
    function updateMenuSettings() {
        const listElement = document.getElementById('current-menu-list');
        listElement.innerHTML = '';
        document.getElementById('menu-count').textContent = game.menu.length;

        game.menu.forEach(item => {
            const itemRow = document.createElement('div');
            itemRow.className = 'menu-item-row';
            itemRow.innerHTML = `
                <span>${item.name} (åŸä¾¡: ${item.cost.toLocaleString()}å††)</span>
                <div>
                    <input type="number" id="price-${item.name.replace(/\s/g, '-')}" value="${item.currentPrice}" min="1" onchange="setMenuPrice('${item.name}', this.value)"> å††
                    <button onclick="removeMenuItem('${item.name}')" style="background-color: #f44336; padding: 5px 10px;">å‰Šé™¤</button>
                </div>
            `;
            listElement.appendChild(itemRow);
        });
    }

    function setMenuPrice(itemName, newPrice) {
        const price = parseInt(newPrice);
        if (isNaN(price) || price <= 0) {
            terop('ä¾¡æ ¼ã¯æ­£ã®æ•°å€¤ã§è¨­å®šã—ã¦ãã ã•ã„ã€‚');
            document.getElementById(`price-${itemName.replace(/\s/g, '-')}`).value = game.menu.find(m => m.name === itemName).currentPrice;
            return;
        }
        
        const menu = game.menu.find(m => m.name === itemName);
        if (menu) {
            menu.currentPrice = price;
            terop(`${itemName}ã®ä¾¡æ ¼ã‚’${price.toLocaleString()}å††ã«å¤‰æ›´ã—ã¾ã—ãŸã€‚`);
        }
    }

    function removeMenuItem(itemName) {
        const index = game.menu.findIndex(m => m.name === itemName);
        if (index !== -1) {
            game.menu.splice(index, 1);
            updateMenuSettings();
            terop(`${itemName}ã‚’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰å‰Šé™¤ã—ã¾ã—ãŸã€‚`);
        }
    }

    function showAllMenuOptions() {
        const optionsArea = document.getElementById('all-menu-options');
        optionsArea.style.display = 'block';
        optionsArea.innerHTML = '';

        // ã€ãƒãƒ¼ãƒˆè¨­å®šã€‘å…¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—
        const allItems = [...MENU_DATA.FastFood, ...MENU_DATA.Restaurant];
        
        if (!allItems) return;

        allItems.forEach(itemData => {
            if (game.menu.some(m => m.name === itemData.name)) return;
            
            const button = document.createElement('button');
            button.textContent = `${itemData.name} (${itemData.basePrice.toLocaleString()}å††)`;
            button.onclick = () => addMenuItem(itemData);
            optionsArea.appendChild(button);
        });
        
        if (optionsArea.children.length === 0) {
            optionsArea.innerHTML = '<p>æ–°ã—ã„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯ã™ã¹ã¦æä¾›ä¸­ã§ã™ï¼</p>';
        }
    }

    function addMenuItem(itemData) {
        game.menu.push(new MenuItem(itemData.name, itemData.basePrice, itemData.cost));
        updateMenuSettings();
        terop(`${itemData.name}ã‚’æ–°ã—ã„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¨ã—ã¦è¿½åŠ ã—ã¾ã—ãŸï¼`);
        
        const optionsArea = document.getElementById('all-menu-options');
        optionsArea.style.display = 'none';
    }

    // --- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•° ---
    function terop(message) {
        const teropElement = document.getElementById('log-terop');
        teropElement.textContent = message;
        teropElement.style.opacity = 1;
        setTimeout(() => {
            teropElement.style.opacity = 0;
        }, 3000);
    }

    // --- ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã®åˆæœŸåŒ–ã¨åˆæœŸå‡¦ç† ---
    const game = new GameManager();
    let gameLoopRef = null;

    window.onload = () => {
        showScreen('home-screen');
    };

</script>
</body>
</html>
